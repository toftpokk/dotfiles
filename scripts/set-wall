#!/bin/sh
if [ "$1" = "-h" ]; then
  echo "Usage: $0 [Image or Directory]"
  exit 1
fi

arg=${1:-~/Backgrounds/safe_for_powerpoint}

# Check if swww exists
if ! swww -V &>/dev/null; then
  echo "Error: swww not found" >&2
  exit 1
fi
if ! swww query &>/dev/null; then
  swww init
fi


if [ -d "$arg" ]; then
	# Directory
	image=$(ls "$arg" | shuf -n 1)
	image="$arg/$image"
elif [ -f "$arg" ]; then
	# Image
	image="$arg"
else
	# Neither
	echo "Error: Argument is not image or directory" >&2
	exit 1
fi
swww img "$image" --transition-type wipe
